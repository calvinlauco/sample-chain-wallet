<div *ngIf="status !== 'Completed' || status !== 'Refunded'">
  <button
    type="button"
    class="btn btn-info btn-sm"
    (click)="openModal(recevied)"
    *ngIf="status === 'Delivering'"
  >
    Confirm receipt
  </button>
  <button
    type="button"
    class="btn btn-danger btn-sm"
    (click)="openModal(refund)"
    *ngIf="status === 'Refunding'"
  >
    Confirm refund
  </button>
  <button
    type="button"
    class="btn btn-warning btn-sm"
    (click)="openModal(escrow)"
    *ngIf="status !== 'PendingPayment'"
  >
    Involve escrow
  </button>
</div>

<ng-template #recevied>
  <div class="modal-header bg-info">
    <h5 class="modal-title pull-left">Confirm receipt</h5>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-multi-sig-action-form
      [partyA]="'Merchant'"
      [partyAAmount]="amount"
      [partyB]="'You'"
      [partyBAmount]="fee"
      [orderId]="orderId"
      [orderStatus]="status"
      (sent)="handleFundsSent($event)"
      (cancelled)="closeModal()"
    ></app-multi-sig-action-form>
  </div>
</ng-template>

<ng-template #refund>
  <div class="modal-header bg-danger">
    <h5 class="modal-title pull-left">Confirm refund</h5>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-multi-sig-action-form
      [partyA]="'Merchant'"
      [partyAAmount]="0"
      [partyB]="'You'"
      [partyBAmount]="amount + fee"
      [orderId]="orderId"
      [orderStatus]="status"
      (sent)="handleFundsSent($event)"
      (cancelled)="closeModal()"
    ></app-multi-sig-action-form>
  </div>
</ng-template>

<ng-template #escrow>
  <div class="modal-header bg-warning">
    <h5 class="modal-title pull-left">Involve escrow</h5>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-multi-sig-action-form
      [partyA]="'Escrow'"
      [partyAAmount]="fee"
      [partyB]="'You'"
      [partyBAmount]="amount"
      [orderId]="orderId"
      [orderStatus]="status"
      (sent)="handleFundsSent($event)"
      (cancelled)="closeModal()"
    ></app-multi-sig-action-form>
  </div>
</ng-template>
